@using Fashion.ERP.Web.Areas.Producao.Models
@model FichaTecnicaModel

@Html.HiddenFor(x => x.Id)

@(Html.Kendo().TabStrip()
    .Name("tabstrip")
    .Events(events => events
        .ContentLoad("onContentLoad")
    )
    .Items(tabstrip =>
    {
        tabstrip.Add().Text("Básicos")
            .Selected(true)
            .LoadContentFrom("Basicos", "FichaTecnica", new { fichaTecnicaId = Model.Id });
        tabstrip.Add().Text("Processos")
            .Selected(false)
            .Enabled(true)
            .LoadContentFrom("Processos", "FichaTecnica", new { fichaTecnicaId = Model.Id });
        tabstrip.Add().Text("Material")
            .Selected(false)
            .Enabled(true)
            .LoadContentFrom("Material", "FichaTecnica", new { fichaTecnicaId = Model.Id });
    }).SelectedIndex(0)
)

@{
    Html.RenderAction("Pesquisar", "Material", new { area = "Almoxarifado" });
}

@Scripts.Render("~/js/Producao/FichaTecnica/basicos.js")
@Scripts.Render("~/js/Producao/FichaTecnica/processos.js")
@Scripts.Render("~/js/Producao/FichaTecnica/material.js")

<script>
    $(document).ready(function(e) {
        var tabStrip = $("#tabstrip").data("kendoTabStrip");
        var tabProcessos = $('li[aria-controls="tabstrip-2"]');
        var tabMateriais = $('li[aria-controls="tabstrip-3"]');

        tabStrip.enable(tabProcessos, false);
        tabStrip.enable(tabMateriais, false);
    });

    function onContentLoad(e) {
        onContentLoadBasicos(e);
        onContentLoadProcessos(e);
        onContentLoadMaterial(e);
    }

    function formateDecimalGrid(valor) {
        if (valor == null) {
            return null;
        }
        return valor.toString().replace(".", ",");
    }
</script>
